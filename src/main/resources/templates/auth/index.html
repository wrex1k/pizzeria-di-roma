<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Experience authentic Italian pizza delivered to your door. Fresh ingredients, traditional recipes, modern convenience.">
    <meta name="keywords" content="pizza, italian food, delivery, authentic pizza, pizzeria, login, register">
    <meta name="author" content="Pizzeria di Roma">

    <title>Sign In - Pizzeria di Roma</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" th:href="@{/favicon.png}">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Montserrat:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: ['class'],
            theme: {
                extend: {
                    fontFamily: {
                        display: ['Playfair Display', 'serif'],
                        sans: ['Montserrat', 'sans-serif'],
                    },
                    colors: {
                        border: 'hsl(30, 30%, 85%)',
                        input: 'hsl(30, 30%, 90%)',
                        ring: 'hsl(0, 70%, 51%)',
                        background: 'hsl(32, 65%, 95%)',
                        foreground: 'hsl(0, 0%, 11%)',
                        primary: {
                            DEFAULT: 'hsl(0, 70%, 51%)',
                            foreground: 'hsl(0, 0%, 100%)',
                        },
                        secondary: {
                            DEFAULT: 'hsl(32, 65%, 95%)',
                            foreground: 'hsl(0, 0%, 11%)',
                        },
                        destructive: {
                            DEFAULT: 'hsl(0, 70%, 51%)',
                            foreground: 'hsl(0, 0%, 100%)',
                        },
                        muted: {
                            DEFAULT: 'hsl(30, 40%, 88%)',
                            foreground: 'hsl(0, 0%, 45%)',
                        },
                        accent: {
                            DEFAULT: 'hsl(45, 98%, 60%)',
                            foreground: 'hsl(0, 0%, 11%)',
                        },
                        popover: {
                            DEFAULT: 'hsl(0, 0%, 100%)',
                            foreground: 'hsl(0, 0%, 11%)',
                        },
                        card: {
                            DEFAULT: 'hsl(0, 0%, 100%)',
                            foreground: 'hsl(0, 0%, 11%)',
                        },
                    },
                    borderRadius: {
                        lg: '0.75rem',
                        md: 'calc(0.75rem - 2px)',
                        sm: 'calc(0.75rem - 4px)',
                    },
                    keyframes: {
                        'scale-in': {
                            '0%': {
                                opacity: '0',
                                transform: 'scale(0.9)'
                            },
                            '100%': {
                                opacity: '1',
                                transform: 'scale(1)'
                            }
                        },
                        'fade-in': {
                            '0%': {
                                opacity: '0',
                                transform: 'translateY(10px)'
                            },
                            '100%': {
                                opacity: '1',
                                transform: 'translateY(0)'
                            }
                        },
                    },
                    animation: {
                        'scale-in': 'scale-in 0.3s ease-out',
                        'fade-in': 'fade-in 0.3s ease-out',
                    },
                }
            }
        }
    </script>

    <!-- Custom CSS -->
    <style>
        body {
            background-color: hsl(32, 65%, 95%);
            font-family: 'Montserrat', sans-serif;
        }

        .hero-gradient {
            background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
        }

        .hero-gradient:hover {
            background: linear-gradient(135deg, #C62828 0%, #B71C1C 100%);
        }

        .transition-smooth {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tab-button-active {
            background-color: white;
            color: hsl(0, 0%, 11%);
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }

        .tab-button-inactive {
            background-color: transparent;
            color: hsl(0, 0%, 45%);
        }

        .tab-content-hidden {
            display: none;
        }

        .show-password-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        input:focus {
            outline: none;
            border-color: hsl(0, 70%, 51%);
            box-shadow: 0 0 0 2px hsl(0, 70%, 51%);
        }

        /* Scrollbar styling for register form */
        #register-content::-webkit-scrollbar {
            width: 6px;
        }

        #register-content::-webkit-scrollbar-track {
            background: transparent;
        }

        #register-content::-webkit-scrollbar-thumb {
            background: hsl(0, 0%, 45%);
            border-radius: 3px;
        }

        #register-content::-webkit-scrollbar-thumb:hover {
            background: hsl(0, 70%, 51%);
        }

        /* Section headers styling */
        #register-content h3 {
            border-bottom: 1px solid hsl(30, 30%, 85%);
            padding-bottom: 0.5rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>
    <section class="min-h-screen flex items-center justify-center p-4 relative"
        style="background-image: url('/images/default-pizza.jpg'); background-size: cover; background-position: center;">
        <div class="absolute inset-0 bg-foreground/60 backdrop-blur-sm"></div>

        <!-- Back to Home Button -->
        <a th:href="@{/}"
            class="absolute top-8 left-8 z-10 inline-flex items-center text-white hover:text-accent transition-smooth">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="h-5 w-5 mr-2">
                <path d="m12 19-7-7 7-7"></path>
                <path d="M19 12H5"></path>
            </svg>
            Back to Home
        </a>

        <!-- Auth Card -->
        <div
            class="rounded-lg border bg-card text-card-foreground shadow-sm w-full max-w-md relative z-10 animate-scale-in">
            <!-- Card Header -->
            <div class="flex flex-col space-y-1.5 p-6 text-center">
                <h1 class="text-3xl font-display font-bold text-primary mb-2">Pizzeria di Roma</h1>
                <p class="text-sm text-muted-foreground">Join us for authentic Italian pizza</p>
            </div>

            <!-- Card Content -->
            <div class="p-6 pt-0">
                <!-- Alert Messages -->
                <div th:if="${param.error}"
                    class="mb-4 p-3 rounded-md bg-red-50 border border-red-200 text-red-800 text-sm">
                    <p>Invalid email or password. Please try again.</p>
                </div>

                <div th:if="${param.register}"
                    class="mb-4 p-3 rounded-md bg-green-50 border border-green-200 text-green-800 text-sm">
                    <p>Registration successful! Please login.</p>
                </div>

                <div th:if="${param.logout}"
                    class="mb-4 p-3 rounded-md bg-blue-50 border border-blue-200 text-blue-800 text-sm">
                    <p>You have been logged out successfully.</p>
                </div>

                <!-- Tabs Container -->
                <div class="w-full">
                    <!-- Tab Buttons -->
                    <div role="tablist"
                        class="h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-2 mb-6">
                        <button type="button" onclick="showTab('login')" id="login-tab"
                            class="tab-button-active inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-smooth">
                            Login
                        </button>
                        <button type="button" onclick="showTab('register')" id="register-tab"
                            class="tab-button-inactive inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-smooth">
                            Register
                        </button>
                    </div>

                    <!-- Login Tab Content -->
                    <div id="login-content" class="animate-fade-in">
                        <form th:action="@{/login}" method="post" class="space-y-4">
                            <!-- CSRF Token -->
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                            <!-- Email Field -->
                            <div class="space-y-2">
                                <label class="text-sm font-medium leading-none" for="login-email">Email</label>
                                <div class="relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                                        <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                    </svg>
                                    <input type="email" name="email" id="login-email"
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-10"
                                        placeholder="your@email.com" required />
                                </div>
                            </div>

                            <!-- Password Field -->
                            <div class="space-y-2">
                                <label class="text-sm font-medium leading-none" for="login-password">Password</label>
                                <div class="relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                                        <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    <input type="password" name="password" id="login-password"
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"
                                        placeholder="••••••••" required />
                                    <button type="button" onclick="togglePassword('login-password', 'login-eye-icon')"
                                        class="show-password-btn absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground">
                                        <svg id="login-eye-icon" xmlns="http://www.w3.org/2000/svg" width="24"
                                            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                            class="h-4 w-4">
                                            <path
                                                d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0">
                                            </path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Remember Me & Forgot Password -->
                            <div class="flex  justify-end">
                                <!--<div class="flex items-center space-x-2">
                                <input type="checkbox" name="remember-me" id="remember"
                                       class="h-4 w-4 rounded border-primary text-primary focus:ring-primary">
                                <label for="remember" class="text-sm font-medium leading-none">Remember me</label>
                            </div>-->
                                <button type="button" class="text-primary text-sm hover:underline transition-smooth">
                                    Forgot password?
                                </button>
                            </div>

                            <!-- Submit Button -->
                            <button type="submit"
                                class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 h-11 rounded-md px-8 w-full hero-gradient text-white">
                                Sign In
                            </button>
                        </form>
                    </div>

                    <!-- Register Tab Content -->
                    <div id="register-content" class="tab-content-hidden animate-fade-in">
                        <form th:action="@{/register}" th:object="${user}" method="post" class="space-y-4">
                            <!-- CSRF Token -->
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                            <!-- First Name Field -->
                            <div class="space-y-2">
                                <label class="text-sm font-medium leading-none" for="register-firstname">First
                                    Name</label>
                                <div class="relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                                        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    <input type="text" th:field="*{firstName}" id="register-firstname"
                                        th:classappend="${#fields.hasErrors('firstName')} ? 'border-red-500' : ''"
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-10"
                                        placeholder="John" required />
                                </div>
                                <p th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"
                                    class="text-xs text-red-600 mt-1"></p>
                            </div>

                            <!-- Last Name Field -->
                            <div class="space-y-2">
                                <label class="text-sm font-medium leading-none" for="register-lastname">Last
                                    Name</label>
                                <div class="relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                                        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    <input type="text" th:field="*{lastName}" id="register-lastname"
                                        th:classappend="${#fields.hasErrors('lastName')} ? 'border-red-500' : ''"
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-10"
                                        placeholder="Doe" required />
                                </div>
                                <p th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"
                                    class="text-xs text-red-600 mt-1"></p>
                            </div>

                            <!-- Email Field -->
                            <div class="space-y-2">
                                <label class="text-sm font-medium leading-none" for="register-email">Email</label>
                                <div class="relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                                        <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                    </svg>
                                    <input type="email" th:field="*{email}" id="register-email"
                                        th:classappend="${#fields.hasErrors('email')} ? 'border-red-500' : ''"
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-10"
                                        placeholder="your@email.com" required />
                                </div>
                                <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}"
                                    class="text-xs text-red-600 mt-1"></p>
                            </div>

                            <!-- Password Field -->
                            <div class="space-y-2">
                                <label class="text-sm font-medium leading-none" for="register-password">Password</label>
                                <div class="relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                                        <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    <input type="password" th:field="*{password}" id="register-password"
                                        th:classappend="${#fields.hasErrors('password')} ? 'border-red-500' : ''"
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"
                                        placeholder="Min. 8 characters" required />
                                    <button type="button"
                                        onclick="togglePassword('register-password', 'register-eye-icon')"
                                        class="show-password-btn absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground">
                                        <svg id="register-eye-icon" xmlns="http://www.w3.org/2000/svg" width="24"
                                            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                            class="h-4 w-4">
                                            <path
                                                d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0">
                                            </path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                    </button>
                                </div>
                                <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}"
                                    class="text-xs text-red-600 mt-1"></p>
                            </div>

                            <!-- Confirm Password Field -->
                            <div class="space-y-2">
                                <label class="text-sm font-medium leading-none" for="register-confirm-password">Confirm
                                    Password</label>
                                <div class="relative">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                                        <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    <input type="password" th:field="*{confirmPassword}" id="register-confirm-password"
                                        th:classappend="${#fields.hasErrors('confirmPassword')} ? 'border-red-500' : ''"
                                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 pl-10 pr-10"
                                        placeholder="Repeat password" />
                                    <button type="button"
                                        onclick="togglePassword('register-confirm-password', 'register-confirm-eye-icon')"
                                        class="show-password-btn absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground">
                                        <svg id="register-confirm-eye-icon" xmlns="http://www.w3.org/2000/svg"
                                            width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                            class="h-4 w-4">
                                            <path
                                                d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0">
                                            </path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                    </button>
                                </div>
                                <p th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}"
                                    class="text-xs text-red-600 mt-1"></p>
                            </div>

                            <!-- Terms & Conditions / Privacy Policy -->
                            <div class="flex items-start space-x-2 pt-2">
                                <input type="checkbox" th:field="*{termsAccepted}" id="register-terms"
                                    th:classappend="${#fields.hasErrors('termsAccepted')} ? 'border-red-500' : ''"
                                    class="mt-1 h-4 w-4 rounded border-primary text-primary focus:ring-primary">
                                <label for="register-terms" class="text-sm leading-relaxed">
                                    I agree to the <a href="/terms"
                                        class="text-primary hover:underline font-medium">Terms &
                                        Conditions</a>
                                    and <a href="/privacy" class="text-primary hover:underline font-medium">Privacy
                                        Policy</a>
                                </label>
                            </div>
                            <p th:if="${#fields.hasErrors('termsAccepted')}" th:errors="*{termsAccepted}"
                                class="text-xs text-red-600 mt-1"></p>

                            <!-- Submit Button -->
                            <button type="submit"
                                class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 h-11 rounded-md px-8 w-full hero-gradient text-white">
                                Create Account
                            </button>

                            <p class="text-xs text-center text-muted-foreground pt-1">
                                Already have an account? <button type="button" onclick="showTab('login')"
                                    class="text-primary hover:underline font-medium">Sign in here</button>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- JavaScript for Tab Switching and Password Toggle -->
    <script>
        function showTab(tabName) {
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            const loginContent = document.getElementById('login-content');
            const registerContent = document.getElementById('register-content');

            if (tabName === 'login') {
                loginTab.classList.remove('tab-button-inactive');
                loginTab.classList.add('tab-button-active');
                registerTab.classList.remove('tab-button-active');
                registerTab.classList.add('tab-button-inactive');

                loginContent.classList.remove('tab-content-hidden');
                registerContent.classList.add('tab-content-hidden');

                // Change URL to /login
                window.history.pushState({}, '', '/login');
            } else {
                registerTab.classList.remove('tab-button-inactive');
                registerTab.classList.add('tab-button-active');
                loginTab.classList.remove('tab-button-active');
                loginTab.classList.add('tab-button-inactive');

                registerContent.classList.remove('tab-content-hidden');
                loginContent.classList.add('tab-content-hidden');

                // Change URL to /register
                window.history.pushState({}, '', '/register');
            }
        }

        function togglePassword(inputId, iconId) {
            const input = document.getElementById(inputId);
            const icon = document.getElementById(iconId);

            if (input.type === 'password') {
                input.type = 'text';
                icon.innerHTML = `
                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                    <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                    <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                    <line x1="2" x2="22" y1="2" y2="22"></line>
                `;
            } else {
                input.type = 'password';
                icon.innerHTML = `
                    <path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                `;
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const currentPath = window.location.pathname;

            // Check if there are validation errors in the register form
            const hasRegisterErrors = document.querySelector('#register-content .text-red-600') !== null;

            // Show register tab if URL is /register or has errors or has ?tab=register
            if (currentPath.includes('/register') || hasRegisterErrors || urlParams.get('tab') === 'register') {
                showTab('register');
            } else {
                // Default to login tab for /login or any other case
                showTab('login');
            }
        });
    </script>
</body>

</html>